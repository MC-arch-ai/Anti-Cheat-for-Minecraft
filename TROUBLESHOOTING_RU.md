# Руководство по устранению проблем AntiCheat

## Содержание
1. [Общие проблемы](#общие-проблемы)
2. [Ложные срабатывания](#ложные-срабатывания)
3. [Проблемы с производительностью](#проблемы-с-производительностью)
4. [Конфликты с другими плагинами](#конфликты-с-другими-плагинами)
5. [Проблемы с GUI](#проблемы-с-gui)
6. [Проблемы с оповещениями](#проблемы-с-оповещениями)
7. [Инструменты диагностики](#инструменты-диагностики)
8. [Часто задаваемые вопросы](#часто-задаваемые-вопросы)

## Общие проблемы

### Плагин не загружается
**Симптомы:** Плагин не появляется в списке при команде `/plugins` или ошибки в консоли при запуске.

**Решения:**
1. Убедитесь, что вы используете правильную версию Minecraft (1.20+)
2. Проверьте, что версия Java не ниже 17
3. Проверьте логи сервера на наличие конкретных ошибок:
   ```
   cat logs/latest.log | grep "AntiCheat"
   ```
4. Убедитесь, что файл плагина имеет права на чтение и не поврежден

### Команды не работают
**Симптомы:** Команды плагина не распознаются или выдают ошибки.

**Решения:**
1. Убедитесь, что плагин правильно загружен
2. Проверьте свои права доступа к командам
3. Убедитесь, что используете правильный синтаксис команд
4. Попробуйте перезагрузить плагин: `/anticheat reload`

### Плагин не обнаруживает читеров
**Симптомы:** Игроки используют явные читы, но плагин не реагирует.

**Решения:**
1. Проверьте, включены ли соответствующие проверки в конфигурации
2. Увеличьте чувствительность проверок в config.yml
3. Убедитесь, что игроки не имеют разрешения `anticheat.bypass`
4. Проверьте, не установлен ли режим OFF для проверки конкретных игроков

## Ложные срабатывания

### Проверки движения (Speed, Fly, NoFall)
**Симптомы:** Обычные игроки получают наказания за Speed или Fly.

**Решения:**
1. Уменьшите чувствительность проверок:
   ```yaml
   checks:
     movement:
       speed:
         max-speed: 0.9 # Увеличьте значение
       fly:
         oscillation-check: false # Отключите для серверов с лагами
   ```
2. Используйте режим Lenient для игроков с высоким пингом
3. Включите нормализацию скорости:
   ```yaml
   advanced:
     normalize-movement: true
     fix-extreme-velocity: true
   ```

### Боевые проверки (KillAura, Reach)
**Симптомы:** Игроки получают ложные срабатывания во время PvP.

**Решения:**
1. Увеличьте допустимые значения:
   ```yaml
   checks:
     combat:
       reach:
         max-reach: 3.3 # Увеличьте для серверов с лагами
       killaura:
         max-angle: 130 # Увеличьте для большей гибкости
   ```
2. Увеличьте пороги наказаний:
   ```yaml
   punishments:
     thresholds:
       killaura:
         kick: 20 # Вместо 15
         ban: 40 # Вместо 30
   ```

### Проверки игрока (FastBreak, FastPlace)
**Симптомы:** Ложные срабатывания при быстром размещении/разрушении блоков.

**Решения:**
1. Увеличьте допустимые значения:
   ```yaml
   checks:
     player:
       fastplace:
         max-blocks-per-second: 16 # Увеличьте для опытных игроков
   ```
2. Учтите эффекты зелий и зачарований при настройке

## Проблемы с производительностью

### Высокая нагрузка на CPU
**Симптомы:** Повышенная нагрузка на CPU после установки плагина.

**Решения:**
1. Отключите ресурсоемкие проверки:
   ```yaml
   checks:
     world:
       xray:
         enabled: false # Ресурсоемкая проверка
   ```
2. Уменьшите частоту проверок в коде (требуется редактирование исходного кода)
3. Отключите анализ пакетов:
   ```yaml
   advanced:
     packet-analysis: false
   ```

### Лаги сервера
**Симптомы:** Спайки TPS (тиков в секунду) при большом количестве игроков.

**Решения:**
1. Отключите некритичные проверки
2. Оптимизируйте настройки для больших серверов:
   ```yaml
   advanced:
     normalize-movement: false # Если вызывает проблемы
   ```
3. Увеличьте пороги для оповещений, чтобы уменьшить количество сообщений

## Конфликты с другими плагинами

### Плагины движения (Velocity, Trampolines, и т.д.)
**Симптомы:** Ложные срабатывания при использовании плагинов, изменяющих движение.

**Решения:**
1. Отключите конфликтующие проверки или уменьшите их чувствительность
2. Добавьте проверяемые плагины в белый список (требуется модификация кода)
3. Установите режим проверки Lenient для всех игроков

### Плагины боя (Combat Enhancement, и т.д.)
**Симптомы:** Ложные срабатывания KillAura при использовании плагинов, изменяющих механику боя.

**Решения:**
1. Отключите проверки KillAura или увеличьте допустимые значения
2. Проверьте совместимость плагинов и по возможности используйте совместимые версии

### Другие анти-читы
**Симптомы:** Конфликты и ошибки при одновременном использовании нескольких анти-читов.

**Решения:**
1. Используйте только один анти-чит плагин
2. Если необходимо использовать несколько, отключите перекрывающиеся проверки в каждом

## Проблемы с GUI

### GUI не открывается
**Симптомы:** Команда `/anticheat gui` не открывает интерфейс.

**Решения:**
1. Проверьте, есть ли у вас разрешение `anticheat.gui`
2. Проверьте логи на наличие ошибок при открытии GUI
3. Убедитесь, что используете совместимую версию сервера

### Кнопки в GUI не работают
**Симптомы:** Клики по кнопкам в GUI не дают результата.

**Решения:**
1. Перезагрузите плагин: `/anticheat reload`
2. Проверьте логи на наличие ошибок при взаимодействии с GUI
3. Убедитесь, что у вас есть все необходимые разрешения

## Проблемы с оповещениями

### Оповещения не отображаются
**Симптомы:** Администраторы не получают оповещения о нарушениях.

**Решения:**
1. Убедитесь, что оповещения включены в конфигурации:
   ```yaml
   alerts:
     enabled: true
   ```
2. Проверьте, что у вас есть разрешение `anticheat.alerts`
3. Включите оповещения для себя: `/anticheat alerts`

### Webhook оповещения не работают
**Симптомы:** Оповещения не отправляются в Discord.

**Решения:**
1. Проверьте правильность URL вебхука
2. Убедитесь, что сервер имеет доступ к интернету
3. Проверьте логи на наличие ошибок при отправке вебхуков

## Инструменты диагностики

### Включение режима отладки
Включите режим отладки для получения подробной информации о работе плагина:
```yaml
settings:
  debug-mode: true
```

### Анализ логов
После включения режима отладки, проверьте логи на наличие информации:
```
cat logs/latest.log | grep "AntiCheat"
```

### Мониторинг нарушений
Используйте команду `/anticheat check <игрок>` для просмотра истории нарушений игрока.

## Часто задаваемые вопросы

### Как полностью исключить игрока из проверок?
Дайте игроку разрешение `anticheat.bypass` или используйте команду `/anticheat exempt <игрок>`.

### Как изменить сообщение о кике/бане?
Отредактируйте сообщения в разделе `punishments.actions` в файле config.yml:
```yaml
punishments:
  actions:
    kick:
      message: 'Ваше сообщение о кике здесь'
    ban:
      message: 'Ваше сообщение о бане здесь'
```

### Как настроить автоматические баны?
Включите баны в настройках и установите пороги:
```yaml
punishments:
  actions:
    ban:
      enabled: true
      time: 7d # 7 дней или 'permanent' для постоянного бана
  thresholds:
    killaura:
      ban: 30 # Бан после 30 нарушений
```

### Какие проверки наиболее эффективны?
Наиболее эффективные проверки:
- KillAura (обнаружение автоматических ударов)
- Reach (обнаружение ударов на большом расстоянии)
- Speed (обнаружение слишком быстрого движения)
- Fly (обнаружение полета в режиме выживания)

### Как сбросить все нарушения игрока?
Используйте команду `/anticheat reset <игрок>` для сброса всех нарушений. 